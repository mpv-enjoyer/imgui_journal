Есть структура Календарь, содержащая массив уроков для групп (в скобках структура под названием Занятие):
0 | Группа 1 | понедельник | (09:00-10:00 | изо), (10:00-11:00 | лепка)
1 | Группа 2 | понедельник | (09:00-10:00 | лепка), (10:00-11:00 | изо)
2 | Группа 3 | понедельник | (10:00-11:00 | спецкурс)
...
При этом, ID в первой строке не зависит от времени и при добавлении/удалении уроков будет перемешиваться.
Структура календарь должна быть отсортирована по времени начала уроков.

Есть структура Календарь_Архив, содержащая предыдущие состояния Календаря.
К примеру, если в предыдущем примере Группа 1 начиная с 17 июля будет приходить лишь на изо в 09:00-10:00, выглядеть это должно так:
0 | Группа 1 | понедельник | (09:00-10:00 | изо) | 16.07.23
Т.е. 16.07.23 - последний день, когда архивная запись имела место.
Если в Группе занятия больше проводиться не будут, все занятия из Календаря должны быть заменены nullptr, но отражены в Календарь_Архив.
Если создается новая группа, в архиве отмечается, будто до этого у неё не было занятий.

Есть структура Группа[], содержащая всех учеников:
Группа 1 | Ученик 1, Ученик 2, ...
Группа 2 | Ученик 2, Ученик 3, ...
Ученики должны быть отсортированы по ID.

В полном соответствии есть структура Группа_Архив

Таким образом Календарь может содержать несколько групп в разное время, и в нескольких группах может быть один и тот же ученик.

Есть структура Ученик, в которой можно указать, ТОЛЬКО на какие занятия должен ходить ученик:
0 | ФИО | {договор} | nullptr
1 | ФИО | {договор} | КАЛЕНДАРЬ[0][1]
Таким образом, Ученик 1, принадлежащий Группе 1 должен будет приходить только на занятия по лепке, в 10:00 в понедельник.
nullptr равносилен тому, что человек не должен приходить ни на одно занятие. ЭТО НЕ ДОЛЖНО ВСТРЕЧАТЬСЯ.
По умолчанию последнее поле автоматически заполняется всеми занятиями соответствующих групп.

В полном соответствии есть структура Ученик_Архив (если ученик передумал и захотел ходить на другие занятия, оставаясь в той же группе).

Над всем этим структура Журнал, содержащая информацию, пришел определенный Ученик на Занятие или нет:
(КАЛЕНДАРЬ[0][1], 17.07.23) | ++++++-+-+О+ | (КАЛЕНДАРЬ[0][1], 19.07.23)
Поскольку Ученики всегда отсортированы по ID, неоднозначности нет. Первое поле однозначно определяет Занятие, в определенный день, в определенное время. Последнее - отработки.

Если нужно узнать цену за месяц, производится запрос. Цена однозначно определяется курсом(ИЗО, спецкурс, ...) (возможно надо ввести Цена_Архив).
Выделяем ученика, он содержит занятия, на которые должен прийти. Проверяем архив на наличие поправок. После этого складываем суммы всех занятий за месяц, на которые должен был прийти Ученик.

При любом изменении в Календаре нужно пересчитать занятия соответствующих учеников.
При любом изменении в Группе нужно пересчитать занятия учеников, которых изменения затронули.
При этом предыдущая информация должна отправиться в Ученик_Архив.
Поскольку изменение архива ученика может провоцироваться изменением других структур, в остальных Архивах нужно добавить поле, показывающее, какой ID в Ученик_Архив был создан, для упрощения операции отмены.